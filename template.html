<!-- Das ist die template.html -->
<div class="form-builder-container" @keyup="handleKeyUp" tabindex="0">
    <!-- Benachrichtigungsbereich -->
    <div id="notification" :class="['notification', notificationType, { show: notificationVisible }]">
        {{ notificationMessage }}
    </div>

    <!-- Modal-Popup für die Namenseingabe -->
    <div v-if="showNameModal" class="modal-overlay">
        <div class="modal">
            <h2>Formularname eingeben</h2>
            <input v-model="formNameInput" placeholder="Formularname" />
            <button @click="saveFormName">Speichern</button>
            <button @click="cancelFormCreation">Abbrechen</button>
        </div>
    </div>

    <!-- Header mit Aktionsbuttons -->
    <header class="form-builder-header">
        <div class="header-title">
            <h1>{{ formName || 'Neues Formular' }}</h1>
            <div class="header-buttons">
                <button @click="editFormName" class="edit-button header-action-button">
                    <i class="fas fa-pen"></i> Bearbeiten
                </button>
            </div>
        </div>
        <div class="header-buttons">
            <button class="undo-button" @click="undo" :disabled="historyIndex <= 0">
                <i class="fas fa-undo"></i> Rückgängig
            </button>
            <button class="redo-button" @click="redo" :disabled="historyIndex >= history.length - 1">
                <i class="fas fa-redo"></i> Wiederholen
            </button>
            <button class="save-button" @click="saveForm"><i class="fas fa-save"></i> Speichern</button>
            <button class="preview-button"><i class="fas fa-eye"></i> Vorschau</button>
            <button class="back-button" @click="confirmBack"><i class="fas fa-arrow-left"></i> Zurück</button>
        </div>
    </header>

    <main>
        <section id="form-builder" class="form-builder-main">
            <!-- Baustein-Liste -->
            <div id="form-elements" class="form-elements">
                <h2>Bausteine</h2>
                <ul>
                    <li v-for="element in elements" :key="element.id" @dragstart="startDrag(element, $event)"
                        @dragend="resetDragState" draggable="true" @dblclick="addElementToPreview(element)">
                        <i :class="element.icon"></i>
                        <span class="element-label">{{ element.label }}</span>
                        <!-- Tooltip basierend auf description -->
                        <span class="help-icon" :data-id="element.id">
                            ?
                            <span class="tooltip">{{ element.description }}</span>
                        </span>
                    </li>
                </ul>
            </div>

            <!-- Form Vorschau-Bereich -->
            <div id="form-preview" class="form-preview" @dragover.prevent="onDragOverPreview"
                @dragleave="onDragLeavePreview" @drop="onDropPreview">
                <h2>Formular</h2>

                <div v-for="(item, index) in formElements" :key="item.id" @dragover.prevent="onDragOver($event, index)"
                    @dragleave="onDragLeave($event, index)" @drop="onDrop($event, index)" class="form-element-wrapper">

                    <!-- Container für den Baustein und die Pfeile -->
                    <div class="controls-container">
                        <!-- Icon des Elements -->
                        <i :class="item.icon" class="element-icon"></i>

                        <!-- Pfeile für Verschiebung -->
                        <div class="move-buttons">
                            <button @click.stop="moveElementUp(index)" :disabled="index === 0">▲</button>
                            <button @click.stop="moveElementDown(index)"
                                :disabled="index === formElements.length - 1">▼</button>
                        </div>

                        <!-- Vorschau des Bausteins -->
                        <div class="form-element live-preview" @click="selectElement(item)"
                            @dragstart="startReorderDrag(index, $event)" @dragend="resetDragState" draggable="true"
                            :style="{
                border: selectedElement?.id === item.id ? '2px solid #007bff' : '2px solid #ccc',
            }">

                            <!-- Dynamisches Rendering des Elements mit der `render`-Funktion -->
                            <div v-if="item.render" v-html="item.render(item, {})" style="width: 100%;"></div>

                        </div>
                    </div>
                </div>
                <!-- Platzhalter am Ende, falls der Drop am Schluss der Liste sein soll -->
                <div v-if="dragOverIndex === formElements.length" class="drop-indicator"></div>
            </div>

            <!-- Eigenschaftenbereich -->
            <aside id="properties" class="form-properties">
                <div v-if="selectedElement && selectedElement.specificProperties">
                    <h2>Eigenschaften</h2>
                    <div class="properties-header">
                        <i :class="selectedElement.icon"></i> {{ selectedElement.label }}
                    </div>
                    <p class="description">{{ selectedElement.description }}</p>

                    <!-- Duplizieren, Löschen und Sichtbarkeits-Schalter -->
                    <div class="properties-buttons">
                        <button @click="duplicateElement" class="duplicate-button">
                            <i class="fas fa-copy"></i> Duplizieren
                        </button>
                        <button @click="deleteSelectedElementFromProperties" class="delete-button">
                            <i class="fas fa-trash"></i> Löschen
                        </button>
                    </div>

                    <!-- Allgemeine Eigenschaften -->

                    <div class="property-group">

                        <h3 @click="toggleSection('general')">
                            <i class="fas fa-cogs"></i> Allgemeine Eigenschaften
                            <i :class="isGeneralVisible ? 'fas fa-chevron-up' : 'fas fa-chevron-down'"></i>
                        </h3>
                        <div v-show="isGeneralVisible">
                            <div class="property">
                                <label>Baustein ID:</label>
                                <span>{{ selectedElement.id }}</span>
                            </div>
                            <div class="property">
                                <label for="visibility">Sichtbar:</label>
                                <input type="checkbox" id="visibility"
                                    v-model="selectedElement.generalProperties.visible" @change="updateVisibility" />
                            </div>
                            <div class="property">
                                <label for="isRequired">Pflichtfeld:</label>
                                <input type="checkbox" id="isRequired"
                                    v-model="selectedElement.generalProperties.isRequired"
                                    @change="updateGeneralProperty('isRequired', $event.target.checked)" />
                            </div>
                        </div>

                        <!-- Spezifische Eigenschaften -->
                        <!-- <div class="property-group"> -->
                        <h3 @click="toggleSection('specific')">
                            <i class="fas fa-sliders-h"></i> Spezifische Eigenschaften
                            <i :class="isSpecificVisible ? 'fas fa-chevron-up' : 'fas fa-chevron-down'"></i>
                        </h3>
                        <!-- Spezifische Eigenschaften Container mit Schaltfunktion -->
                        <div v-show="isSpecificVisible">
                            <!-- ID 4 - Textelement - Spezifische Eigenschaften für den Text -->
                            <div v-if="selectedElement.type === 'input'" class="property-group">
                                <!-- Textinhalt -->
                                <div class="property">
                                    <label for="content">Text:</label>
                                    <textarea id="content" v-model="selectedElement.specificProperties.content"
                                        @input="updateSpecificProperty('content', $event.target.value)" rows="4"
                                        placeholder="Geben Sie hier den Text ein..."></textarea>
                                </div>

                                <div class="variable-list-container property">
                                    <p class="variable-list-title">Mögliche Variablen:</p>
                                    <div class="variable-buttons">
                                        <button v-for="(label, key) in variableOptions" :key="key"
                                            @click="insertVariable(key)">
                                            {{ label }}
                                        </button>
                                    </div>
                                </div>

                                <!-- Textfarbe -->
                                <div class="property">
                                    <label for="textColor">Textfarbe:</label>
                                    <input type="color" id="textColor"
                                        v-model="selectedElement.specificProperties.textColor"
                                        @input="updateSpecificProperty('textColor', $event.target.value)" />
                                </div>

                                <!-- Textgröße -->
                                <div class="property">
                                    <label for="textSize">Textgröße:</label>
                                    <select id="textSize" v-model="selectedElement.specificProperties.textSize"
                                        @change="updateSpecificProperty('textSize', $event.target.value)">
                                        <option value="small">Klein</option>
                                        <option value="medium">Mittel</option>
                                        <option value="large">Groß</option>
                                    </select>
                                </div>

                                <!-- Textformatierung -->
                                <div class="property">
                                    <label for="format">Formatierung:</label>
                                    <select id="format" v-model="selectedElement.specificProperties.format"
                                        @change="updateSpecificProperty('format', $event.target.value)">
                                        <option value="normal">Normal</option>
                                        <option value="bold">Fett</option>
                                        <option value="italic">Kursiv</option>
                                    </select>
                                </div>

                                <!-- Textausrichtung -->
                                <div class="property">
                                    <label for="alignment">Ausrichtung:</label>
                                    <select id="alignment" v-model="selectedElement.specificProperties.alignment"
                                        @change="updateSpecificProperty('alignment', $event.target.value)">
                                        <option value="left">Links</option>
                                        <option value="center">Zentriert</option>
                                        <option value="right">Rechts</option>
                                        <option value="justify">Blocksatz</option>
                                    </select>
                                </div>

                                <!-- Schriftart -->
                                <div class="property">
                                    <label for="fontFamily">Schriftart:</label>
                                    <select id="fontFamily" v-model="selectedElement.specificProperties.fontFamily"
                                        @change="updateSpecificProperty('fontFamily', $event.target.value)">
                                        <option value="Arial">Arial</option>
                                        <option value="Verdana">Verdana</option>
                                        <option value="Times New Roman">Times New Roman</option>
                                    </select>
                                </div>

                                <!-- Hintergrundfarbe -->
                                <div class="property">
                                    <label for="backgroundColor">Hintergrundfarbe:</label>
                                    <input type="color" id="backgroundColor"
                                        v-model="selectedElement.specificProperties.backgroundColor"
                                        @input="updateSpecificProperty('backgroundColor', $event.target.value)" />
                                </div>

                                <!-- Rahmen -->
                                <div class="property">
                                    <label for="borderStyle">Rahmenstil:</label>
                                    <select id="borderStyle" v-model="selectedElement.specificProperties.border.style"
                                        @change="updateSpecificProperty('border.style', $event.target.value)">
                                        <option value="none">Kein Rahmen</option>
                                        <option value="solid">Durchgezogen</option>
                                        <option value="dashed">Gestrichelt</option>
                                        <option value="dotted">Gepunktet</option>
                                    </select>
                                </div>

                                <div class="property">
                                    <label for="borderWidth">Rahmenbreite:</label>
                                    <input type="range" min="1" max="10" step="1"
                                        v-model="selectedElement.specificProperties.border.width"
                                        @input="updateSpecificProperty('border.width', $event.target.value + 'px')" />
                                </div>

                                <div class="property">
                                    <label for="borderColor">Rahmenfarbe:</label>
                                    <input type="color" id="borderColor"
                                        v-model="selectedElement.specificProperties.border.color"
                                        @input="updateSpecificProperty('border.color', $event.target.value)" />
                                </div>

                                <!-- Zeilenhöhe -->
                                <div class="property">
                                    <label for="lineHeight">Zeilenhöhe:</label>
                                    <select id="lineHeight" v-model="selectedElement.specificProperties.lineHeight"
                                        @change="updateSpecificProperty('lineHeight', $event.target.value)">
                                        <option value="normal">Normal</option>
                                        <option value="1.5">1.5</option>
                                        <option value="2">2</option>
                                    </select>
                                </div>

                                <!-- Textdekoration -->
                                <div class="property">
                                    <label for="textDecoration">Textdekoration:</label>
                                    <select id="textDecoration"
                                        v-model="selectedElement.specificProperties.textDecoration"
                                        @change="updateSpecificProperty('textDecoration', $event.target.value)">
                                        <option value="none">Keine</option>
                                        <option value="underline">Unterstrichen</option>
                                        <option value="line-through">Durchgestrichen</option>
                                    </select>
                                </div>
                            </div>
                            <!-- ID 4 Freier Text Ende -->

                            <!-- ID 5 - Trennlinie - Spezifische Eigenschaften für die Trennlinie -->
                            <div v-if="selectedElement.type === 'hr'" class="property-group">
                                <!-- Stil der Linie -->
                                <div class="property">
                                    <label for="lineStyle">Stil:</label>
                                    <select v-model="selectedElement.specificProperties.lineStyle"
                                        @change="updateSpecificProperty('lineStyle', $event.target.value)">
                                        <option value="solid">Durchgezogen</option>
                                        <option value="dashed">Gestrichelt</option>
                                    </select>
                                </div>

                                <!-- Farbe der Linie -->
                                <div class="property">
                                    <label for="lineColor">Farbe:</label>
                                    <input type="color" v-model="selectedElement.specificProperties.lineColor"
                                        @input="updateSpecificProperty('lineColor', $event.target.value)" />
                                </div>

                                <!-- Dicke der Linie -->
                                <div class="property">
                                    <label for="lineWidth">Dicke:</label>
                                    <input type="range" min="1" max="10" step="1"
                                        :value="parseInt(selectedElement.specificProperties.lineWidth) || 1"
                                        @input="updateSpecificProperty('lineWidth', $event.target.value + 'px')" />
                                    <div class="value-display">{{ selectedElement.specificProperties.lineWidth }}
                                    </div>
                                </div>
                            </div>
                            <!-- Ende Baustein Trennlinie -->

                            <!-- ID 12 - Datums- und Zeitauswahl - Spezifische Eigenschaften -->
                            <div v-if="selectedElement.type === 'datetime-picker'" class="property-group">
                                <!-- Beschriftung -->
                                <div class="property">
                                    <label for="label">Beschriftung:</label>
                                    <input type="text" id="label" v-model="selectedElement.specificProperties.label"
                                        @input="updateSpecificProperty('label', $event.target.value)"
                                        placeholder="Beschriftung eingeben" />
                                </div>

                                <!-- Hinweistext -->
                                <div class="property">
                                    <label for="placeholder">Hinweistext:</label>
                                    <input type="text" id="placeholder"
                                        v-model="selectedElement.specificProperties.placeholder"
                                        @input="updateSpecificProperty('placeholder', $event.target.value)"
                                        placeholder="Platzhaltertext eingeben" />
                                </div>

                                <!-- Format -->
                                <div class="property">
                                    <label for="format">Format:</label>
                                    <select id="format" v-model="selectedElement.specificProperties.format"
                                        @change="updateSpecificProperty('format', $event.target.value)">
                                        <option value="datetime">Datum & Zeit</option>
                                        <option value="date">Nur Datum</option>
                                        <option value="time">Nur Zeit</option>
                                    </select>
                                </div>

                                <!-- Textfarbe -->
                                <div class="property">
                                    <label for="textColor">Textfarbe:</label>
                                    <input type="color" id="textColor"
                                        v-model="selectedElement.specificProperties.textColor"
                                        @input="updateSpecificProperty('textColor', $event.target.value)" />
                                </div>
                            </div>
                            <!-- Ende Baustein "Datums- und Zeitauswahl" -->
                            <!-- ID 13 - Dokument anhängen - Spezifische Eigenschaften -->
                            <div v-if="selectedElement.type === 'file-upload'" class="property-group">
                                <!-- Beschriftung -->
                                <div class="property">
                                    <label for="label">Beschriftung:</label>
                                    <input type="text" id="label" v-model="selectedElement.generalProperties.label"
                                        @input="updateSpecificProperty('label', $event.target.value)"
                                        placeholder="Beschriftung eingeben" />
                                </div>

                                <!-- Erlaubte Dateitypen -->
                                <div class="property">
                                    <label>Erlaubte Dateitypen:</label>
                                    <div class="checkbox-group">
                                        <label>
                                            <input type="checkbox" value="PDF"
                                                :checked="selectedElement.specificProperties.allowedFileTypes.includes('PDF')"
                                                @change="toggleFileType('PDF')" /> PDF
                                        </label>
                                        <label>
                                            <input type="checkbox" value="JPG"
                                                :checked="selectedElement.specificProperties.allowedFileTypes.includes('JPG')"
                                                @change="toggleFileType('JPG')" /> JPG
                                        </label>
                                        <label>
                                            <input type="checkbox" value="PNG"
                                                :checked="selectedElement.specificProperties.allowedFileTypes.includes('PNG')"
                                                @change="toggleFileType('PNG')" /> PNG
                                        </label>
                                        <label>
                                            <input type="checkbox" value="DOCX"
                                                :checked="selectedElement.specificProperties.allowedFileTypes.includes('DOCX')"
                                                @change="toggleFileType('DOCX')" /> DOCX
                                        </label>
                                    </div>
                                    <small>Wählen Sie die erlaubten Dateitypen aus.</small>
                                </div>

                                <!-- Maximale Dateigröße -->
                                <div class="property">
                                    <label for="maxFileSize">Maximale Dateigröße (MB):</label>
                                    <input type="number" id="maxFileSize" min="1"
                                        v-model="selectedElement.specificProperties.maxFileSize"
                                        @input="updateSpecificProperty('maxFileSize', parseInt($event.target.value))"
                                        placeholder="Max. Größe in MB" />
                                </div>

                                <!-- Mehrere Dateien erlauben -->
                                <div class="property">
                                    <label for="multipleFiles">Mehrere Dateien erlauben:</label>
                                    <input type="checkbox" id="multipleFiles"
                                        v-model="selectedElement.specificProperties.multipleFiles"
                                        @change="updateSpecificProperty('multipleFiles', $event.target.checked)" />
                                </div>

                            </div>
                            <!-- Ende Baustein "Dokument anhängen" -->

                            <!--  ID14- Senden-Baustein spezifische Eigenschaften -->
                            <div v-if="selectedElement.type === 'submit-button'" class="property-group">
                                <!-- Ziel-Cloud Auswahl -->
                                <div class="property">
                                    <label for="targetCloud">Ziel-Cloud:</label>
                                    <select id="targetCloud" v-model="selectedElement.specificProperties.targetCloud"
                                        @change="updateSpecificProperty('targetCloud', $event.target.value)">
                                        <option value="GoogleDrive">Google Drive</option>
                                        <option value="OneDrive">OneDrive</option>
                                        <option value="Dropbox">Dropbox</option>
                                        <option value="Nextcloud">Nextcloud</option>
                                    </select>
                                </div>

                                <!-- Ordner-Namenskonvention -->
                                <div class="property">
                                    <label for="folderNamingConvention">Ordner-Namenskonvention:</label>
                                    <input type="text" id="folderNamingConvention"
                                        v-model="selectedElement.specificProperties.folderNamingConvention"
                                        @input="updateSpecificProperty('folderNamingConvention', $event.target.value)"
                                        placeholder="Ordnername eingeben..." />
                                </div>

                                <!-- Datei-Namenskonvention -->
                                <div class="property">
                                    <label for="fileNamingConvention">Datei-Namenskonvention:</label>
                                    <input type="text" id="fileNamingConvention"
                                        v-model="selectedElement.specificProperties.fileNamingConvention"
                                        @input="updateSpecificProperty('fileNamingConvention', $event.target.value)"
                                        placeholder="Dateiname eingeben..." />
                                </div>

                                <!-- Nutzer benachrichtigen -->
                                <div class="property">
                                    <label for="notifyUser">Nutzer benachrichtigen:</label>
                                    <input type="checkbox" id="notifyUser"
                                        v-model="selectedElement.specificProperties.notifyUser"
                                        @change="updateSpecificProperty('notifyUser', $event.target.checked)" />
                                </div>
                            </div>

                            <!--  ID 31 -- Spezifische Eigenschaften für Radio Buttons -->
                            <div v-if="selectedElement.type === 'radio-group'" class="property-group">
                                <div class="radio-options-container">
                                    <!-- NEU: Gruppen-Beschriftung -->
                                    <div class="radio-option-row">
                                        <label class="radio-option-label">Gruppen-Beschriftung:</label>
                                        <input type="text" class="radio-option-input"
                                            v-model="selectedElement.specificProperties.groupLabel"
                                            @input="updateSpecificProperty('groupLabel', $event.target.value)"
                                            placeholder="Beschriftung über den Optionen" />
                                    </div>
                                    <h3>Radio Button Optionen</h3>

                                    <!-- Optionen Verwaltung -->
                                    <div v-for="(option, index) in selectedElement.specificProperties.options"
                                        :key="index" class="radio-option-row">
                                        <span class="option-number">Option {{ index + 1 }}</span>

                                        <label class="radio-option-label">Beschriftung:</label>
                                        <input type="text" class="radio-option-input"
                                            v-model="selectedElement.specificProperties.optionLabels[index]"
                                            placeholder="Beschriftung eingeben"
                                            @input="updateRadioOption(index, $event.target.value)" />

                                        <button @click="removeOption(index)" class="delete-option-button"
                                            title="Option löschen">
                                            <i class="fas fa-trash"></i>
                                        </button>
                                    </div>

                                    <button @click="addOption" class="add-option-button">
                                        <i class="fas fa-plus"></i> Neue Option hinzufügen
                                    </button>

                                    <!-- Layout Einstellungen -->
                                    <div class="radio-option-row">
                                        <label class="radio-option-label">Ausrichtung:</label>
                                        <select class="radio-option-input"
                                            v-model="selectedElement.specificProperties.layout"
                                            @change="updateSpecificProperty('layout', $event.target.value)">
                                            <option value="vertical">Vertikal</option>
                                            <option value="horizontal">Horizontal</option>
                                        </select>
                                    </div>

                                    <!-- Abstände -->
                                    <div class="radio-option-row">
                                        <label class="radio-option-label">Abstände:</label>
                                        <select class="radio-option-input"
                                            v-model="selectedElement.specificProperties.spacing"
                                            @change="updateSpecificProperty('spacing', $event.target.value)">
                                            <option value="small">Klein</option>
                                            <option value="medium">Mittel</option>
                                            <option value="large">Groß</option>
                                        </select>
                                    </div>

                                    <!-- Farben -->
                                    <div class="radio-option-row">
                                        <label class="radio-option-label">Textfarbe:</label>
                                        <input type="color" class="radio-option-input"
                                            v-model="selectedElement.specificProperties.textColor"
                                            @input="updateSpecificProperty('textColor', $event.target.value)" />
                                    </div>

                                    <div class="radio-option-row">
                                        <label class="radio-option-label">Hintergrundfarbe:</label>
                                        <input type="color" class="radio-option-input"
                                            v-model="selectedElement.specificProperties.backgroundColor"
                                            @input="updateSpecificProperty('backgroundColor', $event.target.value)" />
                                    </div>

                                    <!-- Standardauswahl -->
                                    <div class="radio-option-row">
                                        <label class="radio-option-label">Standardauswahl:</label>
                                        <select class="radio-option-input"
                                            v-model="selectedElement.specificProperties.defaultSelected"
                                            @change="updateSpecificProperty('defaultSelected', $event.target.value)">
                                            <option v-for="option in selectedElement.specificProperties.options"
                                                :key="option" :value="option">
                                                {{ option }}
                                            </option>
                                        </select>
                                    </div>
                                </div>
                            </div>

                            <!-- ID 18 - Freitexteingabe -->
                            <div v-if="selectedElement.type === 'textarea'" class="property-group">
                                <!-- Beschriftung -->
                                <div class="property">
                                    <label for="label">Beschriftung:</label>
                                    <input type="text" id="label" v-model="selectedElement.generalProperties.label"
                                        @input="updateGeneralProperty('label', $event.target.value)" />
                                </div>

                                <!-- Platzhaltertext -->
                                <div class="property">
                                    <label for="placeholder">Platzhaltertext:</label>
                                    <input type="text" id="placeholder"
                                        v-model="selectedElement.specificProperties.placeholder"
                                        @input="updateSpecificProperty('placeholder', $event.target.value)" />
                                </div>

                                <!-- Standardwert -->
                                <div class="property">
                                    <label for="defaultValue">Standardwert:</label>
                                    <textarea id="defaultValue"
                                        v-model="selectedElement.specificProperties.defaultValue"
                                        @input="updateSpecificProperty('defaultValue', $event.target.value)"
                                        rows="3"></textarea>
                                </div>

                                <!-- Zeilen -->
                                <div class="property">
                                    <label for="rows">Anzahl Zeilen:</label>
                                    <input type="number" id="rows" min="2" max="10"
                                        v-model="selectedElement.specificProperties.rows"
                                        @input="updateSpecificProperty('rows', parseInt($event.target.value))" />
                                </div>

                                <!-- Minimale Länge -->
                                <div class="property">
                                    <label for="minLength">Minimale Länge:</label>
                                    <input type="number" id="minLength" min="0"
                                        v-model="selectedElement.specificProperties.minLength"
                                        @input="updateSpecificProperty('minLength', parseInt($event.target.value))" />
                                </div>

                                <!-- Maximale Länge -->
                                <div class="property">
                                    <label for="maxLength">Maximale Länge:</label>
                                    <input type="number" id="maxLength" min="0"
                                        v-model="selectedElement.specificProperties.maxLength"
                                        @input="updateSpecificProperty('maxLength', parseInt($event.target.value))" />
                                </div>

                                <!-- Schriftgröße -->
                                <div class="property">
                                    <label for="fontSize">Schriftgröße:</label>
                                    <select id="fontSize" v-model="selectedElement.specificProperties.fontSize"
                                        @change="updateSpecificProperty('fontSize', $event.target.value)">
                                        <option value="small">Klein</option>
                                        <option value="medium">Mittel</option>
                                        <option value="large">Groß</option>
                                    </select>
                                </div>

                                <!-- Schriftart -->
                                <div class="property">
                                    <label for="fontFamily">Schriftart:</label>
                                    <select id="fontFamily" v-model="selectedElement.specificProperties.fontFamily"
                                        @change="updateSpecificProperty('fontFamily', $event.target.value)">
                                        <option value="Arial">Arial</option>
                                        <option value="Verdana">Verdana</option>
                                        <option value="Times New Roman">Times New Roman</option>
                                        <option value="Courier New">Courier New</option>
                                    </select>
                                </div>

                                <!-- Größenänderung -->
                                <div class="property">
                                    <label for="resize">Größenänderung erlauben:</label>
                                    <select id="resize" v-model="selectedElement.specificProperties.resize"
                                        @change="updateSpecificProperty('resize', $event.target.value)">
                                        <option value="none">Keine</option>
                                        <option value="vertical">Vertikal</option>
                                        <option value="both">Beide Richtungen</option>
                                    </select>
                                </div>

                                <!-- Textfarbe -->
                                <div class="property">
                                    <label for="textColor">Textfarbe:</label>
                                    <input type="color" id="textColor"
                                        v-model="selectedElement.specificProperties.textColor"
                                        @input="updateSpecificProperty('textColor', $event.target.value)" />
                                </div>

                                <!-- Hintergrundfarbe -->
                                <div class="property">
                                    <label for="backgroundColor">Hintergrundfarbe:</label>
                                    <input type="color" id="backgroundColor"
                                        v-model="selectedElement.specificProperties.backgroundColor"
                                        @input="updateSpecificProperty('backgroundColor', $event.target.value)" />
                                </div>

                                <!-- Rahmenfarbe -->
                                <div class="property">
                                    <label for="borderColor">Rahmenfarbe:</label>
                                    <input type="color" id="borderColor"
                                        v-model="selectedElement.specificProperties.borderColor"
                                        @input="updateSpecificProperty('borderColor', $event.target.value)" />
                                </div>

                                <!-- Rechtschreibprüfung -->
                                <div class="property">
                                    <label for="spellcheck">Rechtschreibprüfung:</label>
                                    <input type="checkbox" id="spellcheck"
                                        v-model="selectedElement.specificProperties.spellcheck"
                                        @change="updateSpecificProperty('spellcheck', $event.target.checked)" />
                                </div>

                                <!-- Nur-Lesen-Modus -->
                                <div class="property">
                                    <label for="readonly">Nur-Lesen-Modus:</label>
                                    <input type="checkbox" id="readonly"
                                        v-model="selectedElement.specificProperties.readonly"
                                        @change="updateSpecificProperty('readonly', $event.target.checked)" />
                                </div>
                            </div>

                            <!-- Eigenschaften für das Zahleneingabefeld -->
                            <div v-if="selectedElement.type === 'number-input'" class="property-group">
                                <!-- Titel/Label Einstellung -->
                                <div class="property">
                                    <label for="elementLabel">Titel:</label>
                                    <input type="text" id="elementLabel"
                                        v-model="selectedElement.generalProperties.label"
                                        @input="updateGeneralProperty('label', $event.target.value)"
                                        placeholder="Titel des Eingabefelds">
                                </div>

                                <!-- Allgemeine Einstellungen für Zahlen -->
                                <div class="property">
                                    <label for="minValue">Minimalwert:</label>
                                    <input type="number" id="minValue"
                                        v-model="selectedElement.specificProperties.minValue"
                                        @input="updateSpecificProperty('minValue', parseInt($event.target.value))"
                                        placeholder="Minimaler Wert">
                                </div>

                                <div class="property">
                                    <label for="maxValue">Maximalwert:</label>
                                    <input type="number" id="maxValue"
                                        v-model="selectedElement.specificProperties.maxValue"
                                        @input="updateSpecificProperty('maxValue', parseInt($event.target.value))"
                                        placeholder="Maximaler Wert">
                                </div>

                                <div class="property">
                                    <label for="stepSize">Schrittweite:</label>
                                    <input type="number" id="stepSize"
                                        v-model="selectedElement.specificProperties.stepSize"
                                        @input="updateSpecificProperty('stepSize', parseFloat($event.target.value))"
                                        step="0.1" placeholder="Schrittweite">
                                </div>

                                <div class="property">
                                    <label for="defaultValue">Standardwert:</label>
                                    <input type="number" id="defaultValue"
                                        v-model="selectedElement.specificProperties.defaultValue"
                                        @input="updateSpecificProperty('defaultValue', parseFloat($event.target.value))"
                                        placeholder="Standardwert">
                                </div>

                                <!-- Einheit -->
                                <div class="property">
                                    <label for="unit">Einheit:</label>
                                    <input type="text" id="unit" v-model="selectedElement.specificProperties.unit"
                                        @input="updateSpecificProperty('unit', $event.target.value)"
                                        placeholder="z.B. €, km, m">
                                </div>

                                <!-- Dezimalzahlen-Einstellungen -->
                                <div class="property">
                                    <label for="allowDecimals">Dezimalzahlen erlauben:</label>
                                    <div class="toggle-switch">
                                        <input type="checkbox" id="allowDecimals"
                                            v-model="selectedElement.specificProperties.allowDecimals"
                                            @change="updateNumberInputSettings('allowDecimals', $event.target.checked)">
                                        <span class="slider"></span>
                                    </div>
                                </div>

                                <!-- Dezimalstellen nur anzeigen, wenn Dezimalzahlen erlaubt sind -->
                                <div class="property" v-if="selectedElement.specificProperties.allowDecimals === true">
                                    <label for="decimalPlaces">Dezimalstellen:</label>
                                    <input type="number" id="decimalPlaces"
                                        v-model="selectedElement.specificProperties.decimalPlaces"
                                        @input="updateSpecificProperty('decimalPlaces', parseInt($event.target.value))"
                                        min="0" max="10">
                                </div>

                                <!-- Ausrichtung -->
                                <div class="property">
                                    <label for="alignment">Ausrichtung:</label>
                                    <select id="alignment" v-model="selectedElement.specificProperties.alignment"
                                        @change="updateSpecificProperty('alignment', $event.target.value)">
                                        <option value="left">Links</option>
                                        <option value="center">Zentriert</option>
                                        <option value="right">Rechts</option>
                                    </select>
                                </div>

                                <!-- Farbeinstellungen -->
                                <div class="property">
                                    <label for="backgroundColor">Hintergrundfarbe:</label>
                                    <input type="color" id="backgroundColor"
                                        v-model="selectedElement.specificProperties.backgroundColor"
                                        @input="updateSpecificProperty('backgroundColor', $event.target.value)">
                                </div>

                                <div class="property">
                                    <label for="textColor">Textfarbe:</label>
                                    <input type="color" id="textColor"
                                        v-model="selectedElement.specificProperties.textColor"
                                        @input="updateSpecificProperty('textColor', $event.target.value)">
                                </div>

                                <!-- Variablenname für Berechnungen -->
                                <div class="property">
                                    <label for="variableName">Variablenname für Berechnungen:</label>
                                    <input type="text" id="variableName"
                                        v-model="selectedElement.specificProperties.variableName"
                                        @input="updateSpecificProperty('variableName', $event.target.value)"
                                        placeholder="z.B. preis, menge">
                                    <small class="hint-text">Der Variablenname wird für Berechnungen verwendet</small>
                                </div>
                            </div>

                            <!-- Eigenschaften für das Dropdown-Menü -->
                            <div v-if="selectedElement.type === 'dropdown'" class="property-group">
                                <div class="radio-options-container">
                                    <!-- Beschriftung -->
                                    <div class="radio-option-row">
                                        <label class="radio-option-label">Beschriftung:</label>
                                        <input type="text" class="radio-option-input"
                                            v-model="selectedElement.specificProperties.label"
                                            placeholder="Beschriftung eingeben"
                                            @input="updateSpecificProperty('label', $event.target.value)" />
                                    </div>

                                    <h3>Dropdown Optionen</h3>

                                    <!-- Optionen Verwaltung -->
                                    <div v-for="(option, index) in selectedElement.specificProperties.options"
                                        :key="index" class="radio-option-row">
                                        <span class="option-number">Option {{ index + 1 }}</span>

                                        <label class="radio-option-label">Beschriftung:</label>
                                        <input type="text" class="radio-option-input"
                                            v-model="selectedElement.specificProperties.optionLabels[index]"
                                            placeholder="Beschriftung eingeben"
                                            @input="updateDropdownOption(index, $event.target.value)" />

                                        <button @click="removeOption(index)" class="delete-option-button"
                                            title="Option löschen">
                                            <i class="fas fa-trash"></i>
                                        </button>
                                    </div>

                                    <button @click="addOption" class="add-option-button">
                                        <i class="fas fa-plus"></i> Neue Option hinzufügen
                                    </button>

                                    <!-- Standardauswahl -->
                                    <div class="radio-option-row">
                                        <label class="radio-option-label">Standardauswahl:</label>
                                        <select class="radio-option-input"
                                            v-model="selectedElement.specificProperties.defaultValue"
                                            @change="updateSpecificProperty('defaultValue', $event.target.value)">
                                            <option value="">Keine Vorauswahl</option>
                                            <option
                                                v-for="(value, index) in selectedElement.specificProperties.optionValues"
                                                :key="index" :value="value">
                                                {{ selectedElement.specificProperties.optionLabels[index] }}
                                            </option>
                                        </select>
                                    </div>

                                    <!-- Farben -->
                                    <div class="radio-option-row">
                                        <label class="radio-option-label">Textfarbe:</label>
                                        <input type="color" class="radio-option-input"
                                            v-model="selectedElement.specificProperties.textColor"
                                            @input="updateSpecificProperty('textColor', $event.target.value)" />
                                    </div>

                                    <div class="radio-option-row">
                                        <label class="radio-option-label">Hintergrundfarbe:</label>
                                        <input type="color" class="radio-option-input"
                                            v-model="selectedElement.specificProperties.backgroundColor"
                                            @input="updateSpecificProperty('backgroundColor', $event.target.value)" />
                                    </div>
                                </div>
                            </div>

                            <!-- ID 10 - Checkbox -->
                            <!-- Spezifische Eigenschaften für Checkbox Gruppe -->
                            <div v-if="selectedElement.type === 'checkbox-group'" class="property-group">
                                <div class="radio-options-container">
                                    <!-- Gruppen-Beschriftung -->
                                    <div class="radio-option-row">
                                        <label class="radio-option-label">Gruppen-Beschriftung:</label>
                                        <input type="text" class="radio-option-input"
                                            v-model="selectedElement.specificProperties.groupLabel"
                                            @input="updateSpecificProperty('groupLabel', $event.target.value)"
                                            placeholder="Beschriftung über den Optionen" />
                                    </div>

                                    <h3>Checkbox Optionen</h3>

                                    <!-- Optionen Verwaltung -->
                                    <div v-for="(option, index) in selectedElement.specificProperties.options"
                                        :key="index" class="radio-option-row">
                                        <span class="option-number">Option {{ index + 1 }}</span>

                                        <label class="radio-option-label">Beschriftung:</label>
                                        <input type="text" class="radio-option-input"
                                            v-model="selectedElement.specificProperties.optionLabels[index]"
                                            placeholder="Beschriftung eingeben"
                                            @input="updateCheckboxOption(index, $event.target.value)" />

                                        <button @click="removeOption(index)" class="delete-option-button"
                                            title="Option löschen">
                                            <i class="fas fa-trash"></i>
                                        </button>
                                    </div>

                                    <button @click="addOption" class="add-option-button">
                                        <i class="fas fa-plus"></i> Neue Option hinzufügen
                                    </button>

                                    <!-- Layout Einstellungen -->
                                    <div class="radio-option-row">
                                        <label class="radio-option-label">Ausrichtung:</label>
                                        <select class="radio-option-input"
                                            v-model="selectedElement.specificProperties.layout"
                                            @change="updateSpecificProperty('layout', $event.target.value)">
                                            <option value="vertical">Untereinander</option>
                                            <option value="horizontal">Nebeneinander</option>
                                        </select>
                                    </div>

                                    <!-- Abstände -->
                                    <div class="radio-option-row">
                                        <label class="radio-option-label">Abstände:</label>
                                        <select class="radio-option-input"
                                            v-model="selectedElement.specificProperties.spacing"
                                            @change="updateSpecificProperty('spacing', $event.target.value)">
                                            <option value="small">Klein</option>
                                            <option value="medium">Mittel</option>
                                            <option value="large">Groß</option>
                                        </select>
                                    </div>

                                    <!-- Minimale/Maximale Auswahl -->
                                    <div class="radio-option-row">
                                        <label class="radio-option-label">Minimale Auswahl:</label>
                                        <input type="number" class="radio-option-input"
                                            v-model="selectedElement.specificProperties.minSelected"
                                            @input="updateSpecificProperty('minSelected', parseInt($event.target.value))"
                                            min="0" :max="selectedElement.specificProperties.options.length" />
                                    </div>

                                    <div class="radio-option-row">
                                        <label class="radio-option-label">Maximale Auswahl:</label>
                                        <input type="number" class="radio-option-input"
                                            v-model="selectedElement.specificProperties.maxSelected"
                                            @input="updateSpecificProperty('maxSelected', parseInt($event.target.value))"
                                            min="0" :max="selectedElement.specificProperties.options.length" />
                                        <small>0 = keine Begrenzung</small>
                                    </div>

                                    <!-- Farben -->
                                    <div class="radio-option-row">
                                        <label class="radio-option-label">Textfarbe:</label>
                                        <input type="color" class="radio-option-input"
                                            v-model="selectedElement.specificProperties.textColor"
                                            @input="updateSpecificProperty('textColor', $event.target.value)" />
                                    </div>

                                    <div class="radio-option-row">
                                        <label class="radio-option-label">Hintergrundfarbe:</label>
                                        <input type="color" class="radio-option-input"
                                            v-model="selectedElement.specificProperties.backgroundColor"
                                            @input="updateSpecificProperty('backgroundColor', $event.target.value)" />
                                    </div>

                                    <!-- Standardauswahl Multiple -->
                                    <div class="radio-option-row">
                                        <label class="radio-option-label">Standardauswahl:</label>
                                        <div class="checkbox-list">
                                            <div v-for="option in selectedElement.specificProperties.options"
                                                :key="option" class="checkbox-list-item">
                                                <label>
                                                    <input type="checkbox" :value="option"
                                                        v-model="selectedElement.specificProperties.defaultSelected"
                                                        @change="updateSpecificProperty('defaultSelected', selectedElement.specificProperties.defaultSelected)" />
                                                    {{ option }}
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>


                        </div>
                    </div>


                </div>

                <div v-else>
                    <h2>Eigenschaften</h2>
                    <div class="noelementselected">
                        Kein Element ausgewählt
                    </div>
                </div>
            </aside>
        </section>
    </main>
</div>